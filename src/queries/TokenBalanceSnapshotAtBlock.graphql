query TokenBalanceSnapshotAtBlock(
  $chainId: Int!
  $token_in: [String!]!
  $account_not_in: [String!]!
  $snapshotBlock: numeric!
  $limit: Int = 1000
  $offset: Int = 0
) {
  TokenBalanceSnapshot(
    limit: $limit
    offset: $offset
    where: {
      chainId: { _eq: $chainId }
      blockNumber: { _eq: $snapshotBlock }
      account_id: { _nin: $account_not_in }
      token_id: { _in: $token_in }
    }
    order_by: { id: desc }
  ) {
    token_id
    account_id
    amount
  }
}
